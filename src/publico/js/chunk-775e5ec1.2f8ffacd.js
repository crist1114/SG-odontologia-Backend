(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-775e5ec1"],{"00ef":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[e.mensaje.ver?o("div",{staticClass:"alert text-center fixed-bottom alert-dismissible fade show",class:"alert-"+e.mensaje.color,attrs:{id:"mensaje",role:"alert"}},[o("h6",[e._v(e._s(e.mensaje.contenido))]),o("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:e.cerrar}},[e._v("x")])]):e._e()])},i=[],n={name:"Mensaje",created:function(){this.cerrar()},props:{mensaje:Object},methods:{cerrar:function(){setInterval(this.ocultar,5e3),this.ocultar()},ocultar:function(){this.mensaje.ver=!1}}},s=n,r=o("2877"),c=Object(r["a"])(s,a,i,!1,null,null,null);t["a"]=c.exports},8133:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"text-center container-inicio-sesion"},[o("Mensaje",{attrs:{mensaje:e.mensaje}}),o("p",{staticClass:"mt-4 titulo-modulo"},[e._v("Registro diagnostico:")]),o("div",{staticClass:"d-flex justify-content-center align-items-center container"},[o("div",{staticClass:"row"},[o("form",{staticClass:"formulario",on:{submit:function(e){e.preventDefault()}}},[o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.diagnostico.nro_documento,expression:"diagnostico.nro_documento"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Número Documento",required:""},domProps:{value:e.diagnostico.nro_documento},on:{input:function(t){t.target.composing||e.$set(e.diagnostico,"nro_documento",t.target.value)}}}),o("button",{staticClass:"btn btn-info form-control",on:{click:function(t){return e.verInfoPaciente()}}},[e._v(" Buscar ")])]),null!==e.infoPaciente?o("div",[o("h5",{staticClass:"mb-5"},[e._v("Paciente: "+e._s(e.infoPaciente.nombre)+" "+e._s(e.infoPaciente.apellido))]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"select"}},[e._v("Seleccione el Procedimiento:")]),e.procedimientos.length>0?o("select",{directives:[{name:"model",rawName:"v-model",value:e.diagnostico.id_procedimiento,expression:"diagnostico.id_procedimiento"}],staticClass:"form-select form-control",attrs:{id:"select","aria-label":"Default select example"},on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.diagnostico,"id_procedimiento",t.target.multiple?o:o[0])},function(t){return e.verTotalPagar(e.diagnostico.id_procedimiento)}]}},e._l(e.procedimientos,(function(t){return o("option",{key:t.id_procedimiento,domProps:{value:t.id_procedimiento}},[e._v(" "+e._s(t.nombre)+" - $ "+e._s(t.precio)+" ")])})),0):e._e()]),o("div",{staticClass:"form-group"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.diagnostico.resultado,expression:"diagnostico.resultado"}],staticClass:"form-control",attrs:{rows:"7",type:"text",placeholder:"Resultado Procedimiento",required:""},domProps:{value:e.diagnostico.resultado},on:{input:function(t){t.target.composing||e.$set(e.diagnostico,"resultado",t.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"select"}},[e._v("Fecha:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.diagnostico.fecha,expression:"diagnostico.fecha"}],staticClass:"form-control",attrs:{type:"date",required:""},domProps:{value:e.diagnostico.fecha},on:{input:function(t){t.target.composing||e.$set(e.diagnostico,"fecha",t.target.value)}}})]),o("div",{staticClass:"form-group"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.diagnostico.observacion,expression:"diagnostico.observacion"}],staticClass:"form-control",attrs:{rows:"7",type:"text",placeholder:"Observación Procedimiento",required:""},domProps:{value:e.diagnostico.observacion},on:{input:function(t){t.target.composing||e.$set(e.diagnostico,"observacion",t.target.value)}}})]),o("h5",[e._v("Total Pagar: $ "+e._s(e.diagnostico.valor_total))]),o("label",{attrs:{for:"select"}},[e._v("Ingrese Abono:")]),o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.diagnostico.abono,expression:"diagnostico.abono"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Abono Procedimiento $",required:""},domProps:{value:e.diagnostico.abono},on:{input:function(t){t.target.composing||e.$set(e.diagnostico,"abono",t.target.value)}}})]),o("div",{staticClass:"form-group"},[o("button",{staticClass:"btn btn-info",on:{click:function(t){return e.cancelar()}}},[e._v("Cancelar")]),o("button",{staticClass:"btn btn-success ml-5",on:{click:function(t){return e.registro()}}},[e._v(" Guardar ")])])]):e._e()])])])],1)},i=[],n=(o("4de4"),o("00ef")),s={data:function(){return{procedimientos:[],diagnostico:{abono:0,valor_total:0,firma_filename:""},diagnosticoIngresado:{},mensaje:{ver:!1},infoPaciente:null}},created:function(){this.verprocedimientos()},methods:{cancelar:function(){this.$router.push("/diagnostico")},crearMensaje:function(e,t){this.mensaje.ver=!0,this.mensaje.contenido=e,this.mensaje.color=t},registro:function(){var e=this;this.axios.post("diagnostico",this.diagnostico,{headers:{Authorization:localStorage.getItem("token")}}).then((function(t){console.warn(t,"R diagnosticos"),t&&200===t.status&&(e.enviarEmail(),e.crearMensaje("Guardado correctamente","success"),e.$router.push("/diagnostico"))})).catch((function(t){e.crearMensaje(t.response.data.mensaje,"danger")}))},verprocedimientos:function(){var e=this;this.axios.get("procedimiento",{headers:{Authorization:localStorage.getItem("token")}}).then((function(t){console.warn(t),e.procedimientos=t.data}))},verTotalPagar:function(e){console.log(e,"id");var t=this.procedimientos.filter((function(t){return t.id_procedimiento==e}));console.log(t,"pro"),this.diagnostico.valor_total=t[0].precio},verInfoPaciente:function(){var e=this;void 0!==this.diagnostico.nro_documento&&this.axios.get("paciente/"+this.diagnostico.nro_documento,{headers:{Authorization:localStorage.getItem("token")}}).then((function(t){console.log(t,"respuesta info"),t.data.length>0?e.infoPaciente=t.data[0]:(e.infoPaciente=null,e.crearMensaje(t.data.mensaje,"danger"))})).catch((function(t){e.crearMensaje(t.response.data.mensaje,"danger")}))},enviarEmail:function(){var e=this,t={nombre:this.infoPaciente.nombre+" "+this.infoPaciente.apellido,email:this.infoPaciente.email,resultado:this.diagnostico.resultado,observacion:this.diagnostico.observacion,valor_total:this.diagnostico.valor_total,abono:this.diagnostico.abono,fecha:this.diagnostico.fecha};this.axios.post("diagnostico/email",t,{headers:{Authorization:localStorage.getItem("token")}}).then((function(t){console.warn(t,"R diagnosticos"),t&&200===t.status&&e.crearMensaje("Diagnostico enviado al email "+e.infoPaciente.email,"success")})).catch((function(t){e.crearMensaje(t.response.data.mensaje,"danger")}))}},components:{Mensaje:n["a"]}},r=s,c=o("2877"),l=Object(c["a"])(r,a,i,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-775e5ec1.2f8ffacd.js.map